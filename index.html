<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>RAVE MINI APP</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: black;
  overflow: hidden;
  font-family: Arial, sans-serif;
}

#rave {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at center, #ff00ff, #000);
  animation: pulse 1s infinite;
}

@keyframes pulse {
  0%   { filter: hue-rotate(0deg); }
  50%  { filter: hue-rotate(180deg); }
  100% { filter: hue-rotate(360deg); }
}

#overlay {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: white;
  z-index: 10;
  text-align: center;
}

h1 {
  font-size: 42px;
  letter-spacing: 4px;
  text-shadow: 0 0 20px #ff00ff;
}

#user {
  opacity: 0.7;
  margin-bottom: 30px;
}

button {
  padding: 18px 50px;
  font-size: 22px;
  border: none;
  border-radius: 30px;
  background: linear-gradient(90deg, #ff00ff, #00ffff);
  color: black;
  cursor: pointer;
  box-shadow: 0 0 25px #ff00ff;
}

#controls {
  position: fixed;
  bottom: 20px;
  width: 100%;
  text-align: center;
  color: white;
  z-index: 20;
}

input[type=range] {
  width: 70%;
}
</style>
</head>

<body>

<div id="rave"></div>

<div id="overlay">
  <h1>RAVE MODE</h1>
  <div id="user">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  <button onclick="startRave()">START RAVE</button>
</div>

<div id="controls" style="display:none">
  <div>‚ö° TEMPO</div>
  <input type="range" min="200" max="2000" value="1000" id="tempo">
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

// USER
const user = tg.initDataUnsafe.user;
document.getElementById('user').innerText =
  user ? `üë§ @${user.username || 'RAVER'}` : 'RAVER';

// RAVE LOGIC
let interval = null;
const rave = document.getElementById('rave');
const tempo = document.getElementById('tempo');

function startRave() {
  document.getElementById('overlay').style.display = 'none';
  document.getElementById('controls').style.display = 'block';
  tg.setHeaderColor('#000000');
  tg.setBackgroundColor('#000000');

  runRave(tempo.value);
}

function runRave(speed) {
  if (interval) clearInterval(interval);
  interval = setInterval(() => {
    rave.style.background =
      `radial-gradient(circle at ${Math.random()*100}% ${Math.random()*100}%,
      hsl(${Math.random()*360},100%,60%), black)`;
  }, speed);
}

tempo.oninput = () => runRave(tempo.value);

// STROBE
setInterval(() => {
  if (Math.random() > 0.8) {
    document.body.style.background = 'white';
    setTimeout(() => document.body.style.background = 'black', 50);
  }
}, 500);
</script>

</body>
</html>
