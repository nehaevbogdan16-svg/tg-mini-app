<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Tournaments Mini App</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #020617;
  color: white;
}
header {
  padding: 15px;
  background: #020617;
  border-bottom: 1px solid #1e293b;
  text-align: center;
}
.tournament {
  border: 1px solid #1e293b;
  border-radius: 12px;
  margin: 15px;
  padding: 15px;
}
button {
  margin-top: 10px;
  padding: 10px 20px;
  border: none;
  border-radius: 10px;
  background: #22c55e;
  cursor: pointer;
}
input {
  width: 90%;
  padding: 8px;
  border-radius: 8px;
  border: none;
  margin-top: 8px;
}
</style>
</head>

<body>

<header>
  <h2>üèÜ –¢—É—Ä–Ω–∏—Ä—ã</h2>
  <div id="user">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
</header>

<div id="list"></div>

<script>
const tg = Telegram.WebApp;
tg.expand();

const user = tg.initDataUnsafe.user;
const username = user?.username || 'player';
document.getElementById('user').innerText = `üë§ @${username}`;

// –î–ï–ú–û-–¢–£–†–ù–ò–†–´
const tournaments = [
  { id: 1, name: 'PUBG SOLO CUP', date: '10 Feb', prize: '5 000‚ÇΩ' },
  { id: 2, name: 'PUBG DUO NIGHT', date: '15 Feb', prize: '10 000‚ÇΩ' }
];

const list = document.getElementById('list');

tournaments.forEach(t => {
  const div = document.createElement('div');
  div.className = 'tournament';
  div.innerHTML = `
    <h3>${t.name}</h3>
    <p>üìÖ ${t.date}</p>
    <p>üí∞ ${t.prize}</p>
    <input placeholder="–ù–∏–∫ –≤ –∏–≥—Ä–µ" id="nick-${t.id}">
    <button onclick="register(${t.id})">–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å</button>
  `;
  list.appendChild(div);
});

function register(id) {
  const nick = document.getElementById(`nick-${id}`).value;
  if (!nick) {
    tg.showAlert('–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫');
    return;
  }

  tg.CloudStorage.setItem(
    `tournament_${id}`,
    JSON.stringify({ user: username, nick }),
    () => tg.showAlert('‚úÖ –í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã')
  );
}
</script>

</body>
</html>
